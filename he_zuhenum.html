<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>组合选号</title>
<style>
	body {
		font-family: Arial, sans-serif;
		margin: 0;
		padding: clamp(1rem, 3vw, 1.5rem);
		max-width: 100vw;
		box-sizing: border-box;
		background-color: #f5f5f5;
	}
	h2 {
		font-size: clamp(1.5rem, 6vw, 2rem);
		text-align: center;
		margin-bottom: 1.5vh;
	}

	/* 数字选择行（Grid布局） */
	.digit-row {
		margin: clamp(1vh, 3vh, 2vh) 0;
		display: grid;
		gap: 0.5rem;
	}
	@media (max-width: 600px) {
		.digit-row {
			grid-template-columns: repeat(5, 1fr);
		}
	}
	@media (min-width: 601px) {
		.digit-row {
			grid-template-columns: repeat(10, 1fr);
		}
	}
	.digit-row h3 {
		grid-column: 1 / -1;
		margin-bottom: 0.5rem;
		font-size: clamp(0.9rem, 3.5vw, 1.1rem);
	}
	.digit-row label {
		display: flex;
		align-items: center;
		justify-content: center;
		background: #fff;
		border-radius: 0.3rem;
		padding: 0.3rem 0;
		box-shadow: 0 1px 3px rgba(0,0,0,0.1);
		font-size: clamp(0.8rem, 3vw, 1rem);
	}
	.digit-row input[type="checkbox"] {
		width: clamp(1.2rem, 5vw, 1.6rem);
		height: clamp(1.2rem, 5vw, 1.6rem);
		margin-right: 0.3rem;
	}

	/* 过滤选项 */
	.filter-row {
		margin: clamp(1vh, 3vh, 2vh) 0;
		display: flex;
		flex-wrap: wrap;
		gap: clamp(0.5rem, 2vw, 1rem);
		align-items: center;
	}
	.filter-row h3 {
		font-size: clamp(0.9rem, 3.5vw, 1.1rem);
		margin-right: clamp(0.5rem, 2vw, 1rem);
		min-width: clamp(3rem, 10vw, 4rem);
	}
	.filter-row label, .filter-row select {
		font-size: clamp(0.8rem, 3vw, 1rem);
		display: flex;
		align-items: center;
	}
	.filter-row input[type="checkbox"] {
		width: clamp(1.2rem, 5vw, 1.6rem);
		height: clamp(1.2rem, 5vw, 1.6rem);
		margin-right: clamp(0.2rem, 1vw, 0.4rem);
	}

	/* 按钮 */
	.reset-button {
		padding: clamp(0.4rem, 2.5vw, 0.7rem) clamp(0.8rem, 3vw, 1.2rem);
		font-size: clamp(0.8rem, 3vw, 1rem);
		border: none;
		border-radius: 0.3rem;
		cursor: pointer;
		touch-action: manipulation;
		background-color: #f44336;
		color: white;
	}
	.reset-button:hover {
		background-color: #d32f2f;
	}

	/* 结果展示 */
	#result {
		line-height: 1.6;
		font-size: clamp(0.8rem, 3vw, 1rem);
		word-break: break-word;
		margin-top: clamp(1vh, 3vh, 2vh);
		padding: 0.5rem;
		background-color: white;
		border-radius: 0.3rem;
	}

	/* 按钮 */
	.group-reset {
		padding: 0.2rem 0.4rem;
		font-size: 1rem;
		border: none;
		border-radius: 0.3rem;
		cursor: pointer;
		background-color: #2196f3;
		color: white;
		margin-left: 0.5rem;
	}
	.group-reset:hover {
		background-color: #1976d2;
	}
</style>

<script>
function getSelectedNumbers() {
		// 获取选中的数字
		let hundred = [], ten = [], unit = [];
		for (let i = 0; i <= 9; i++) {
				if (document.getElementById('hundred' + i).checked) hundred.push(i);
				if (document.getElementById('ten' + i).checked) ten.push(i);
				if (document.getElementById('unit' + i).checked) unit.push(i);
		}

		// 如果未选中，默认使用所有数字
		let hundredNums = hundred.length > 0 ? hundred : [0,1,2,3,4,5,6,7,8,9];
		let tenNums = ten.length > 0 ? ten : [0,1,2,3,4,5,6,7,8,9];
		let unitNums = unit.length > 0 ? unit : [0,1,2,3,4,5,6,7,8,9];

		// 生成所有组合
		let combinations = [];
		for (let h of hundredNums) {
				for (let t of tenNums) {
						for (let u of unitNums) {
								combinations.push(`${h}${t}${u}`);
						}
				}
		}

		// 过滤：组三/组六/豹子
		let group3 = document.getElementById('group3').checked;
		let group6 = document.getElementById('group6').checked;
		let leopard = document.getElementById('leopard').checked;
		let filteredCombinations = [];

		if (!group3 && !group6 && !leopard) {
				filteredCombinations = combinations;
		} else {
				for (let combo of combinations) {
						let digits = combo.split('');
						let isGroup3 = (digits[0] === digits[1] && digits[1] !== digits[2]) ||
													(digits[0] === digits[2] && digits[1] !== digits[2]) ||
													(digits[1] === digits[2] && digits[0] !== digits[1]);
						let isGroup6 = digits[0] !== digits[1] && digits[1] !== digits[2] && digits[0] !== digits[2];
						let isLeopard = digits[0] === digits[1] && digits[1] === digits[2];

						if ((group3 && isGroup3) || (group6 && isGroup6) || (leopard && isLeopard)) {
								filteredCombinations.push(combo);
						}
				}
		}

		// 交集数量筛选
		let filterNumbers = [];
		for (let i = 0; i <= 9; i++) {
				if (document.getElementById('filter' + i).checked) filterNumbers.push(i.toString());
		}
		let intersectionCount = parseInt(document.getElementById('intersectionCount').value, 10) || 1;

		if (filterNumbers.length > 0) {
				filteredCombinations = filteredCombinations.filter(combo => {
						let uniqueDigits = [...new Set(combo.split(''))];
						let count = uniqueDigits.filter(d => filterNumbers.includes(d)).length;
						return count === intersectionCount;
				});
		}

		// 输出结果
		let result = '';
		if (filteredCombinations.length > 0) {
				result = `共有 ${filteredCombinations.length} 组组合<br>组合结果:<br>`;
				for (let i = 0; i < filteredCombinations.length; i++) {
						result += filteredCombinations[i];
						if (i < filteredCombinations.length - 1) result += ', ';
						if ((i + 1) % 5 === 0) result += '<br>';
				}
		} else {
				result = '选中的数字: 无 (请在百位、十位、个位各至少选中一个数字，或选择过滤选项)';
		}

		document.getElementById('result').innerHTML = result;
		document.getElementById('result').dataset.combinations = filteredCombinations.join(', ');
}

function resetForm() {
	for (let i = 0; i <= 9; i++) {
		document.getElementById('hundred' + i).checked = false;
		document.getElementById('ten' + i).checked = false;
		document.getElementById('unit' + i).checked = false;
		document.getElementById('filter' + i).checked = false;
	}
	document.getElementById('group3').checked = false;
	document.getElementById('group6').checked = false;
	document.getElementById('leopard').checked = false;
	document.getElementById('intersectionCount').value = '1';
	document.getElementById('result').innerHTML = '选中的数字: 无 (请在百位、十位、个位各至少选中一个数字，或选择过滤选项)';
	document.getElementById('result').dataset.combinations = '';
}

function resetGroup(group) {
	for (let i = 0; i <= 9; i++) {
		let checkbox = document.getElementById(group + i);
		if (checkbox) checkbox.checked = false;
	}
	getSelectedNumbers();
}
</script>
</head>
<body>
<h2>选择数字</h2>
<form>
	<div class="digit-row">
		<h3>百位 <button type="button" class="group-reset" onclick="resetGroup('hundred')">重 置</button></h3>
		<script>
			for (let i = 0; i <= 9; i++) {
				document.write(`<label><input type="checkbox" id="hundred${i}" onchange="getSelectedNumbers()"> ${i}</label>`);
			}
		</script>
	</div>
	<div class="digit-row">
		<h3>十位 <button type="button" class="group-reset" onclick="resetGroup('ten')">重 置</button></h3>
		<script>
			for (let i = 0; i <= 9; i++) {
				document.write(`<label><input type="checkbox" id="ten${i}" onchange="getSelectedNumbers()"> ${i}</label>`);
			}
		</script>
	</div>
	<div class="digit-row">
		<h3>个位 <button type="button" class="group-reset" onclick="resetGroup('unit')">重 置</button></h3>
		<script>
			for (let i = 0; i <= 9; i++) {
				document.write(`<label><input type="checkbox" id="unit${i}" onchange="getSelectedNumbers()"> ${i}</label>`);
			}
		</script>
	</div>
	<div class="digit-row">
		<h3>号码筛选 <button type="button" class="group-reset" onclick="resetGroup('filter')">重 置</button></h3>
		<script>
			for (let i = 0; i <= 9; i++) {
				document.write(`<label><input type="checkbox" id="filter${i}" onchange="getSelectedNumbers()"> ${i}</label>`);
			}
		</script>
	</div>
	<div class="filter-row">
		<h3>交集数量</h3>
		<select id="intersectionCount" onchange="getSelectedNumbers()">
			<option value="1">1</option>
			<option value="2">2</option>
			<option value="3">3</option>
		</select>
	</div>
	<div class="filter-row">
		<h3>过滤选项</h3>
		<label><input type="checkbox" id="group3" onchange="getSelectedNumbers()"> 组三</label>
		<label><input type="checkbox" id="group6" onchange="getSelectedNumbers()"> 组六</label>
		<label><input type="checkbox" id="leopard" onchange="getSelectedNumbers()"> 豹子</label>
		<button type="button" class="reset-button" onclick="resetForm()">还 原</button>
	</div>
</form>
<p id="result" data-combinations="">选中的数字: 无 (请在百位、十位、个位各至少选中一个数字，或选择过滤选项)</p>
</body>
</html>
